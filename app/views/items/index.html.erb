

<div class="container text-center mt-4">

  <form>
    <div class="input-group">
        <%= form_tag items_path, method: :get do %>
        <%= text_field_tag :query,
          params[:query],
          class: "form-control",
          placeholder: "Look for any sport item"
        %>
      <%= submit_tag 'Search', class: "btn btn-primary" %>
      <% end %>
    </div>
  </form>

  <div class="d-flex justify-content-between align-items-center mt-3">

    <div class="input-group">
      <%= simple_form_for :filter, url: items_path, method: :get do |f| %>
        <%= label :sport, "Filter by sport : ", class: "input-group-prepend" %>
        <%= select_tag "sport",
        options_from_collection_for_select(@sports, "id", "name"),
        class: "select2 form-control",
        multiple: true
        %>
        <%= f.submit "Filter", class: "btn btn-vizi" %>
      <% end %>
    </div>


      <%= form_tag items_path, method: :get, class: "input-group" do %>
        <div>
          <%= label :location, "Search items near : ", class: "input-group-prepend" %>
          <%= text_field_tag :location, params[:location], class: "form-control pt-0 pb-0"%>
        </div>

        <div>
          <%= label :distance, "Distance (in km) : ", class: "input-group-prepend"%>
          <%= text_field_tag :distance, params[:distance], class: "form-control pt-0 pb-0" %>
        </div>

        <div>
          <%= submit_tag "Search", class: "btn btn-vizi ml-1" %>
        </div>
      <% end %>


  </div>


  <div class="container mt-3 d-flex justify-content-between">

    <div class="cards mt-4">
      <% @items.each do |item| %>
        <div class="card-item">
          <div class="card-item-display">
           <% if item.photo.attached? %>
            <%= cl_image_tag item.photo.key, width: 200, height: 200, crop: :fill %>
           <% else %>
            <img src="https://images.unsplash.com/photo-1531722569936-825d3dd91b15?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80" />
           <% end %>
          </div>
          <div class="card-item-hover">
            <h2><%= link_to item.name, item_path(item)%></h2>
            <p><%= item.sport %></p>
            <h2>R$ <%= item.price %></h2>
            <button class="btn btn-vizi mt-2">Add to cart!</button>
            <img src="https://images.unsplash.com/photo-1489980557514-251d61e3eeb6?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80" class="card-item-user avatar-bordered" />
          </div>
        </div>
      <%end%>
    </div>

    <div
    id="map"
    class="map ml-3 mt-4"
    style="width: 100%;
    height: 600px;"
    data-markers="<%= @markers.to_json %>"
    data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
    ></div>

  </div>

  <% if policy(Item).create? %>
    <%= link_to "Add your item!", new_item_path, class: "btn btn-vizi btn-lg mt-3"%>
  <% end %>



</div>

